@if (hasError()) {
	<app-error-while-loading [retryFn]="initSoloPlay" />
} @else {
	@if (loaded()) {
		<div class="h-full w-full">
			@if (colyseusService.soloRoomState$ | async; as state) {
				@switch (state.gameState) {
					@case ('START_COUNTDOWN') {
						<app-game-start [waitingCountdownTime]="state.waitingCountdownTime" />
					}
					@case ('ROUND_END') {
						<app-round-result [score]="state.score" [winner]="state.winner" [word]="state.word" [waitingCountdownTime]="state.waitingCountdownTime" />
					}
					@case ('GAME_END') {
						<app-game-end [totalScore]="state.totalScore" (playNewGameClicked)="initSoloPlay()" />
					}
					@case ('GAME_STARTED') {
						<div class="w-full h-1/3 md:h-full flex flex-col pt-4 gap-10 relative">
							<div class="w-full flex justify-between items-center px-2 md:px-6">
								<app-round [round]="state.round" [totalRound]="state.totalRound" />
								<app-countdown [time]="state.time" />
							</div>
							<div class="h-full w-full grid grid-cols-3 grid-rows-2 gap-y-2">
								@for (cue of getVisibleWords(state.word); track cue.id) {
									<div class="w-full h-full flex justify-center items-center">
										<app-word-bubble [cue]="cue" [key]="state.word?.key" />
									</div>
								}
							</div>
							<div class="w-full h-auto flex justify-center items-center relative">
								<span class="w-[85%] md:w-[50%] mr-2 md:mr-6">
									<app-text-field [control]="soloPlayFormGroup.controls.guess" placeholder="Type your guess here..." />
								</span>
								<fa-icon [icon]="icons.faPaperPlane" class="text-my-orange cursor-pointer text-xl" (click)="submitGuess()" />
								<fa-icon
									[icon]="icons.faTimesCircle"
									class="text-2xl md:w-10 md:h-10 text-my-burgundy cursor-pointer flex justify-center items-center"
									matTooltip="Leave game"
									(click)="exitSoloPlay()" />
							</div>
						</div>
					}
				}
			}
		</div>
	} @else {
		<div class="h-full w-full flex justify-center items-center relative">
			<app-loading />
		</div>
	}
}
